<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keys" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/login.css">
    <style>

    </style>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <div><a class="navbar-brand" href="index.html" style="font-size:32px;">千锋-创意产品众筹平台</a></div>
        </div>
    </div>
</nav>

<div class="container">

    <form class="form-signin" role="form" id="form1" method="post" action="regmember">
        <h2 class="form-signin-heading"><i class="glyphicon glyphicon-log-in"></i> 用户注册</h2>
        <div class="form-group has-success has-feedback">
            <input type="text" class="form-control" name="uname" id="uname" placeholder="请输入登录账号" autofocus><span  style="color:#b2dba1">字母开头，长度3-8位</span>
            <span class="glyphicon glyphicon-user form-control-feedback"></span>
        </div>
        <div class="form-group has-success has-feedback">
            <input type="password" class="form-control" name="upw" id="upw" placeholder="请输入登录密码"
                   style="margin-top:10px;"><span  style="color:#b2dba1">密码6-12位英文字母、数字</span>
            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
        </div>
        <div class="form-group has-success has-feedback">
            <input type="password" class="form-control" id="upw2" placeholder="请重复登录密码"
                   style="margin-top:10px;">
            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
        </div>
        <div class="form-group has-success has-feedback">
            <input type="text" class="form-control" name="email" id="email" placeholder="请输入邮箱地址"
                   style="margin-top:10px;">
            <span class="glyphicon glyphicon glyphicon-envelope form-control-feedback"></span>
        </div>
        <div class="form-group has-success has-feedback">
            <select class="form-control" name="utype">
                <option value="user">会员</option>
                <option value="main">管理</option>
            </select>
        </div>
        <div class="checkbox">
            <label>
                忘记密码
            </label>
            <label style="float:right">
                <a href="login">我有账号</a>
            </label>
        </div>
        <div th:if="${errstring!=null}" style="width: 100%;text-align: center" b>
            <label th:text="${errstring}" style="color: red"></label>
        </div>

        <input type="button"
               style="background-color: #5cb85c;  border-color:#4cae4c;  width: 100% ;  height: 60px; font-size: 18px ;border-radius: 6px;"
              onclick="subm()" value="注册"/>
    </form>
</div>
<script src="jquery/jquery-2.1.1.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
    //以字母开头长度在3-8之间
    var unameform = /^[a-zA-Z]\w{3,8}$/;
    var patrn = /^[a-z,A-Z,0-9]{6,12}$/;
    var emailform = /^[0-9A-Za-z][\.-_0-9A-Za-z]*@[0-9A-Za-z]+(\.[0-9A-Za-z]+)+$/
    $("#uname").change(function () {
        var uname = $("#uname").val();
        if (uname == null |uname == "") {
            $("#uname").focus();
            alert("请输入用户名")
        } else {
            if (!unameform.test(uname)) {
                alert("用户名需以字母开头，长度在3-8之间");
                $("#uname").focus();
            }
        }
    });

    var emailform = /^[0-9A-Za-z][\.-_0-9A-Za-z]*@[0-9A-Za-z]+(\.[0-9A-Za-z]+)+$/
    $("#email").change(function () {
        var email = $("#email").val();
        if (email == null|email == "") {
            alert("请输入邮箱");
            $("#email").focus();
        } else {
            if (!emailform.test($("#email").val())) {
                alert("请输入有效邮箱");
                $("#email").focus();
            }
        }
    });

    $("#upw2").change(function () {
        if ($("#upw").val() == "") {
            alert("密码不可为空");
            $("#upw").focus();
        }
        if ($("#upw2").val() == "") {
            alert("确认密码不可为空");
            $("#upw2").focus();
        }
        var s = $("#upw").val();
        var a = $("#upw2").val();
        if (s != a) {
            alert("两次密码不一致");
            $("#upw2").focus();
        }
    });
    $("#upw").change(function () {
        if ($("#upw").val() == "") {
            alert("密码不可为空");
            $("#upw").focus();
        }
        if (!patrn.test($("#upw").val())) {
            alert('只能输入6-12个字母、数字、下划线 ！');
            $("#upw").focus();
        }

    });

    function sub() {
        var uname = $("#uname").val();
        if (uname == null) {
            $("#uname").focus();
            return false;
            alert("请输入用户名")
        } else {
            if (!unameform.test(uname)) {
                alert("用户名需以字母开头，长度在3-8之间");
                $("#uname").focus();
                return false;
            }
        }
        if ($("#upw").val() == "") {
            alert("密码不可为空");
            $("#upw").focus();
            return false;
        }
        if (!patrn.test($("#upw").val())) {
            alert('只能输入6-12个字母、数字、下划线 ！');
            $("#upw").focus();
            return false;
        }
        if ($("#upw").val() == "") {
            alert("密码不可为空");
            $("#upw").focus();
            return false;
        }
        if (!patrn.test($("#upw").val())) {
            alert('只能输入6-12个字母、数字、下划线 ！');
            $("#upw").focus();
            return false;
        }
        if ($("#upw").val() == "") {
            alert("密码不可为空");
            $("#upw").focus();
            return false;
        }
        if ($("#upw2").val() == "") {
            alert("确认密码不可为空");
            $("#upw2").focus();
            return false;
        }
        var s = $("#upw").val();
        var a = $("#upw2").val();
        if (s != a) {
            alert("两次密码不一致");
            $("#upw2").focus();
            return false;
        }
        var email=$("#email").val();
        if (email == null) {
            alert("请输入邮箱");
            $("#email").focus();
            return false;
        } else {
            if (!emailform.test(email)) {
                alert("请输入有效邮箱");
                $("#email").focus();
                return false;
            }
        }
        return true;
    }

    function  subm() {
        if (sub()==true){
            $("#form1").submit();
        }

    }
</script>
</body>
</html>